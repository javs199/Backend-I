<h1>{{product.title}}</h1>

{{#if error}}
  <p>{{error}}</p>
{{else}}
  <p><strong>Descripción:</strong> {{product.description}}</p>
  <p><strong>Precio:</strong> ${{product.price}}</p>
  <p><strong>Categoría:</strong> {{product.category}}</p>

  <button id="addToCartBtn">Agregar al carrito</button>

  <p id="feedback"></p>

  <script>
    const cartId = '{{cartId}}';
    const productId = '{{product._id}}';

    document.getElementById('addToCartBtn').addEventListener('click', async () => {
      try {
        const response = await fetch(`/api/carts/${cartId}/products/${productId}`, {
          method: 'POST'
        });
        const data = await response.json();
        const feedback = document.getElementById('feedback');
        if (data.status === 'success') {
          feedback.textContent = 'Producto agregado al carrito correctamente.';
        } else {
          feedback.textContent = 'No se pudo agregar el producto al carrito.';
        }
      } catch (error) {
        console.error(error);
        document.getElementById('feedback').textContent = 'Error al agregar al carrito.';
      }
    });
  </script>
{{/if}}
